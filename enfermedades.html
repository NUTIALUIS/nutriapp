<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üìã Enfermedades y Recomendaciones - Consultorio ObstNut</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      background: linear-gradient(135deg, #f8f9fa, #e9ecef);
      min-height: 100vh;
      padding: 2rem 1rem;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .card {
      box-shadow: 0 8px 30px rgba(0,0,0,0.1);
      border: 0;
      border-radius: 16px;
      overflow: hidden;
    }
    .card-header {
      background: linear-gradient(90deg, #4338ca, #7c3aed);
      color: white;
      font-weight: 600;
      padding: 25px;
      text-align: center;
    }
    .form-label {
      font-weight: 500;
      color: #374151;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .form-label i {
      color: #7c3aed;
    }
    .btn-primary {
      background: #7c3aed;
      border: none;
      padding: 14px 32px;
      font-weight: 600;
      border-radius: 12px;
      font-size: 1.1rem;
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      background: #6d28d9;
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(124, 58, 237, 0.4);
    }
    .btn-success {
      background: #10b981;
      border: none;
      padding: 12px 24px;
      font-weight: 600;
      border-radius: 10px;
      font-size: 1rem;
      transition: all 0.3s ease;
      display: none;
    }
    .btn-success:hover {
      background: #059669;
      transform: translateY(-2px);
    }
    .btn-imprimir {
      background: #2196f3;
      border: none;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: 500;
      margin-top: 20px;
    }
    .resultado-card {
      background: white;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.08);
      margin-top: 30px;
      display: none;
      animation: fadeIn 0.5s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .enfermedad-tag {
      display: inline-block;
      background: #ede9fe;
      color: #5b21b6;
      padding: 6px 12px;
      border-radius: 50px;
      font-size: 0.9rem;
      margin: 5px;
      font-weight: 500;
    }
    .recomendacion-section {
      background: #f9fafb;
      border-left: 4px solid #7c3aed;
      padding: 20px;
      border-radius: 0 8px 8px 0;
      margin: 20px 0;
    }
    .recomendacion-section h5 {
      color: #4338ca;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    footer {
      margin-top: 40px;
      text-align: center;
      color: #666;
      font-size: 0.9rem;
      padding: 20px;
    }
    .alert-custom {
      border-radius: 12px;
      font-weight: 500;
    }
    .select-multiple {
      border-radius: 12px;
      border: 2px solid #e5e7eb;
    }
    .select-multiple:focus {
      border-color: #7c3aed;
      box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
    }
    .input-calorias {
      border-radius: 12px;
      border: 2px solid #e5e7eb;
    }
    .input-calorias:focus {
      border-color: #7c3aed;
      box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
    }
    @media print {
      body {
        background: white;
        padding: 20px;
      }
      .btn-imprimir, .btn-success, footer {
        display: none !important;
      }
      .card, .resultado-card {
        box-shadow: none !important;
        border: 1px solid #ddd;
      }
      .resultado-card {
        page-break-inside: avoid;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-9">
        <div class="card">
          <div class="card-header">
            <h1 class="mb-2">üìã Enfermedades y Recomendaciones Nutricionales</h1>
            <p class="mb-0 opacity-75">Personaliza el plan seg√∫n condiciones m√©dicas y necesidades cal√≥ricas</p>
          </div>
          <div class="card-body p-4">

            <div class="alert alert-info alert-custom" role="alert">
              <i class="fas fa-info-circle"></i> <strong>Selecciona una o m√°s enfermedades</strong> y define las calor√≠as diarias para generar recomendaciones personalizadas.
            </div>

            <form id="enfermedades-form">
              <div class="mb-4">
                <label for="enfermedades" class="form-label">
                  <i class="fas fa-disease"></i> Selecciona enfermedades (puedes elegir varias)
                </label>
                <select id="enfermedades" class="form-select select-multiple" multiple required size="8">
                  <option value="cancer">C√°ncer (general)</option>
                  <option value="diabetes">Diabetes</option>
                  <option value="hta">Hipertensi√≥n Arterial (HTA)</option>
                  <option value="gastritis">Gastritis</option>
                  <option value="hipotiroidismo">Hipotiroidismo</option>
                  <option value="hipertiroidismo">Hipertiroidismo</option>
                  <option value="obesidad">Obesidad</option>
                  <option value="sindrome_metabolico">S√≠ndrome Metab√≥lico</option>
                </select>
                <div class="form-text">
                  <i class="fas fa-mouse-pointer"></i> Mant√©n presionada la tecla Ctrl (o Cmd en Mac) para seleccionar m√∫ltiples opciones.
                </div>
              </div>

              <div class="mb-4">
                <label for="kcal" class="form-label">
                  <i class="fas fa-fire"></i> Calor√≠as diarias deseadas
                </label>
                <input type="number" id="kcal" class="form-control input-calorias" placeholder="Ejemplo: 2000" min="1000" max="4000" required />
                <div class="form-text">
                  <i class="fas fa-info-circle"></i> Rango recomendado: 1000 - 4000 kcal/d√≠a
                </div>
              </div>

              <div class="text-center">
                <button type="submit" class="btn btn-primary btn-lg">
                  <i class="fas fa-magic"></i> Generar Recomendaciones Personalizadas
                </button>
              </div>
            </form>

            <!-- Resultado -->
            <div id="resultado" class="resultado-card">
              <div class="text-center mb-4">
                <h2 class="mb-3">üéØ Recomendaciones Nutricionales Personalizadas</h2>
                <div id="enfermedades-seleccionadas"></div>
                <div class="mt-2">
                  <span class="badge bg-primary">‚ö° <span id="calorias-mostradas"></span> kcal/d√≠a</span>
                </div>
              </div>

              <div id="recomendaciones-contenido"></div>

              <div class="text-center mt-4">
                <button onclick="window.print()" class="btn btn-imprimir">
                  <i class="fas fa-print"></i> Imprimir Recomendaciones
                </button>
              </div>
            </div>

            <!-- Bot√≥n para ir al planificador -->
            <div class="text-center mt-4">
              <a href="#" id="enviarDieta" class="btn btn-success btn-lg">
                <i class="fas fa-clipboard-list"></i> Enviar a Planificador de Dietas
              </a>
            </div>

          </div>
        </div>
      </div>
    </div>

    <footer>
      <p><i class="fas fa-heart" style="color:#7c3aed;"></i> ¬© 2025 Consultorio ObstNut ‚Äî Atenci√≥n nutricional personalizada</p>
    </footer>
  </div>

  <script>
    // Base de datos de recomendaciones
    const recomendacionesDB = {
      cancer: {
        nombre: "C√°ncer",
        icono: "fas fa-crosshairs",
        color: "#dc2626",
        recomendaciones: [
          "‚úÖ Priorizar alimentos ricos en antioxidantes (frutos rojos, vegetales de hoja verde, t√© verde).",
          "‚úÖ Aumentar prote√≠nas de alta calidad (pollo, pescado, huevos, legumbres) para mantener masa muscular.",
          "‚úÖ Fraccionar comidas en 5-6 tomas diarias para mejorar tolerancia.",
          "‚úÖ Hidrataci√≥n constante (agua, caldos, infusiones).",
          "‚úÖ Evitar alimentos procesados, az√∫cares a√±adidos y grasas trans.",
          "‚úÖ Suplementar seg√∫n indicaci√≥n m√©dica (prote√≠nas, omega-3, vitaminas)."
        ],
        distribucion: "55% Carbohidratos - 25% Prote√≠nas - 20% Grasas"
      },
      diabetes: {
        nombre: "Diabetes",
        icono: "fas fa-prescription-bottle-alt",
        color: "#ea580c",
        recomendaciones: [
          "‚úÖ Control estricto de carbohidratos (contar gramos o raciones).",
          "‚úÖ Priorizar carbohidratos de bajo √≠ndice gluc√©mico (avena, quinoa, legumbres, frutas enteras).",
          "‚úÖ Distribuir carbohidratos en todas las comidas (evitar concentrarlos).",
          "‚úÖ Incluir prote√≠nas magras y grasas saludables en cada comida para estabilizar glucemia.",
          "‚úÖ Evitar az√∫cares a√±adidos, jugos y bebidas azucaradas.",
          "‚úÖ Ejercicio regular para mejorar sensibilidad a la insulina."
        ],
        distribucion: "45% Carbohidratos - 25% Prote√≠nas - 30% Grasas"
      },
      hta: {
        nombre: "Hipertensi√≥n Arterial",
        icono: "fas fa-heartbeat",
        color: "#dc2626",
        recomendaciones: [
          "‚úÖ Dieta hipos√≥dica (<2g de sodio/d√≠a).",
          "‚úÖ Evitar alimentos procesados, enlatados, embutidos y snacks salados.",
          "‚úÖ Aumentar potasio natural (pl√°tano, papa, espinaca, aguacate).",
          "‚úÖ Incluir alimentos ricos en magnesio (nueces, semillas, legumbres).",
          "‚úÖ Mantener hidrataci√≥n adecuada (2-3L/d√≠a).",
          "‚úÖ Limitar alcohol y cafe√≠na."
        ],
        distribucion: "50% Carbohidratos - 20% Prote√≠nas - 30% Grasas"
      },
      gastritis: {
        nombre: "Gastritis",
        icono: "fas fa-stomach",
        color: "#ca8a04",
        recomendaciones: [
          "‚úÖ Evitar alimentos irritantes (picantes, √°cidos, caf√©, alcohol, fritos).",
          "‚úÖ Fraccionar comidas en 5-6 tomas peque√±as al d√≠a.",
          "‚úÖ Priorizar cocciones suaves (hervido, al vapor, al horno sin grasa).",
          "‚úÖ Masticar bien y comer lentamente.",
          "‚úÖ Evitar acostarse inmediatamente despu√©s de comer.",
          "‚úÖ Incluir alimentos protectores (avena, pl√°tano, manzana, yogur natural)."
        ],
        distribucion: "50% Carbohidratos - 20% Prote√≠nas - 30% Grasas"
      },
      hipotiroidismo: {
        nombre: "Hipotiroidismo",
        icono: "fas fa-snowflake",
        color: "#2563eb",
        recomendaciones: [
          "‚úÖ Aporte adecuado de yodo (pescado, mariscos, sal yodada).",
          "‚úÖ Incluir selenio (nueces de Brasil, huevos, pescado).",
          "‚úÖ Cocinar cruc√≠feras (br√≥coli, coliflor, repollo) para reducir boci√≥genos.",
          "‚úÖ Evitar exceso de soja y derivados sin cocinar.",
          "‚úÖ Controlar fibra para evitar interferencia con medicaci√≥n.",
          "‚úÖ Tomar levotiroxina en ayunas y esperar 30-60 min antes de comer."
        ],
        distribucion: "45% Carbohidratos - 25% Prote√≠nas - 30% Grasas"
      },
      hipertiroidismo: {
        nombre: "Hipertiroidismo",
        icono: "fas fa-fire",
        color: "#ea580c",
        recomendaciones: [
          "‚úÖ Aumentar calor√≠as para compensar metabolismo acelerado.",
          "‚úÖ Priorizar prote√≠nas de alta calidad para prevenir p√©rdida muscular.",
          "‚úÖ Incluir alimentos ricos en calcio y vitamina D (l√°cteos, sardinas, huevo).",
          "‚úÖ Hidrataci√≥n constante (riesgo de deshidrataci√≥n).",
          "‚úÖ Evitar cafe√≠na y estimulantes.",
          "‚úÖ Peque√±as comidas frecuentes para mantener energ√≠a."
        ],
        distribucion: "50% Carbohidratos - 30% Prote√≠nas - 20% Grasas"
      },
      obesidad: {
        nombre: "Obesidad",
        icono: "fas fa-weight",
        color: "#be123c",
        recomendaciones: [
          "‚úÖ Dieta hipocal√≥rica personalizada (d√©ficit de 500-1000 kcal/d√≠a).",
          "‚úÖ Priorizar alimentos de baja densidad energ√©tica (verduras, frutas, prote√≠nas magras).",
          "‚úÖ Control de porciones y horarios de comida.",
          "‚úÖ Evitar ultraprocesados, az√∫cares a√±adidos y grasas saturadas.",
          "‚úÖ Aumentar fibra para saciedad (avena, legumbres, vegetales).",
          "‚úÖ Combinar con actividad f√≠sica regular (150 min/semana)."
        ],
        distribucion: "40% Carbohidratos - 30% Prote√≠nas - 30% Grasas"
      },
      sindrome_metabolico: {
        nombre: "S√≠ndrome Metab√≥lico",
        icono: "fas fa-balance-scale",
        color: "#7c2d12",
        recomendaciones: [
          "‚úÖ Dieta baja en az√∫cares simples y carbohidratos refinados.",
          "‚úÖ Aumentar fibra soluble (avena, lino, legumbres, manzana).",
          "‚úÖ Priorizar grasas saludables (aguacate, aceite de oliva, frutos secos).",
          "‚úÖ Control de porciones y horarios regulares.",
          "‚úÖ Ejercicio aer√≥bico + fuerza (m√≠nimo 150 min/semana).",
          "‚úÖ Reducci√≥n de peso gradual (5-10% del peso inicial)."
        ],
        distribucion: "40% Carbohidratos - 30% Prote√≠nas - 30% Grasas"
      }
    };

    // Manejar env√≠o del formulario
    document.getElementById("enfermedades-form").addEventListener("submit", function (e) {
      e.preventDefault();

      const selectedOptions = Array.from(document.getElementById("enfermedades").selectedOptions);
      const kcal = parseInt(document.getElementById("kcal").value);

      if (selectedOptions.length === 0) {
        alert("‚ö†Ô∏è Por favor selecciona al menos una enfermedad.");
        return;
      }

      if (isNaN(kcal) || kcal < 1000 || kcal > 4000) {
        alert("‚ö†Ô∏è Por favor ingresa un valor v√°lido de calor√≠as (1000-4000).");
        return;
      }

      // Mostrar resultado
      const resultadoDiv = document.getElementById("resultado");
      resultadoDiv.style.display = "block";
      resultadoDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });

      // Mostrar enfermedades seleccionadas
      const enfermedadesDiv = document.getElementById("enfermedades-seleccionadas");
      enfermedadesDiv.innerHTML = "";
      selectedOptions.forEach(option => {
        const key = option.value;
        const info = recomendacionesDB[key];
        if (info) {
          const span = document.createElement("span");
          span.className = "enfermedad-tag";
          span.style.backgroundColor = info.color + "20";
          span.style.color = info.color;
          span.innerHTML = `<i class="${info.icono}"></i> ${info.nombre}`;
          enfermedadesDiv.appendChild(span);
        }
      });

      // Mostrar calor√≠as
      document.getElementById("calorias-mostradas").textContent = kcal.toLocaleString();

      // Generar recomendaciones
      const recomendacionesDiv = document.getElementById("recomendaciones-contenido");
      recomendacionesDiv.innerHTML = "";

      selectedOptions.forEach(option => {
        const key = option.value;
        const info = recomendacionesDB[key];
        if (info) {
          const section = document.createElement("div");
          section.className = "recomendacion-section";
          section.innerHTML = `
            <h5><i class="${info.icono}" style="color: ${info.color};"></i> ${info.nombre}</h5>
            <p><strong>Distribuci√≥n macronutrientes sugerida:</strong> ${info.distribucion}</p>
            <div class="mt-3">
              ${info.recomendaciones.map(rec => `<p><i class="fas fa-check-circle text-success"></i> ${rec}</p>`).join('')}
            </div>
          `;
          recomendacionesDiv.appendChild(section);
        }
      });

      // Mostrar bot√≥n de enviar a planificador
      document.getElementById("enviarDieta").style.display = "inline-block";

      // Guardar datos para el planificador (simulado)
      document.getElementById("enviarDieta").onclick = function(e) {
        e.preventDefault();
        const enfermedades = selectedOptions.map(opt => opt.value);
        alert(`‚úÖ Enviando al planificador:\n- Enfermedades: ${enfermedades.join(', ')}\n- Calor√≠as: ${kcal} kcal/d√≠a\n\n(En un sistema real, esto enviar√≠a los datos al m√≥dulo de planificaci√≥n de dietas)`);
      };
    });
  </script>
</body>
</html>
